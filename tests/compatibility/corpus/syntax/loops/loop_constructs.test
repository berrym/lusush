@test "for loop list"
@feature none
@profiles bash zsh lush

@input
for x in a b c; do echo $x; done
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok

---

@test "for loop c-style"
@feature none
@profiles bash zsh lush

@input
for ((i=0; i<3; i++)); do echo $i; done
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok

---

@test "while loop"
@feature none
@profiles bash zsh lush

@input
x=0; while [[ $x -lt 3 ]]; do echo $x; ((x++)); done
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok

---

@test "until loop"
@feature none
@profiles bash zsh lush

@input
x=0; until [[ $x -ge 3 ]]; do echo $x; ((x++)); done
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok

---

@test "select loop syntax"
@feature FEATURE_SELECT_LOOP
@profiles bash zsh lush

# Note: We only test parsing, not execution (would need interactive input)
@input
select opt in a b c; do break; done </dev/null
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok

---

@test "for loop brace expansion"
@feature FEATURE_BRACE_EXPANSION
@profiles bash zsh lush

@input
for x in {1..3}; do echo $x; done
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok

---

@test "for loop array"
@feature FEATURE_INDEXED_ARRAYS
@profiles bash zsh lush

@input
arr=(one two three)
for x in "${arr[@]}"; do echo $x; done
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok

---

@test "nested loops"
@feature none
@profiles bash zsh lush

@input
for i in 1 2; do for j in a b; do echo "$i$j"; done; done
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok

---

@test "loop with break"
@feature none
@profiles bash zsh lush

@input
for x in 1 2 3 4 5; do
    if [[ $x -eq 3 ]]; then break; fi
    echo $x
done
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok

---

@test "loop with continue"
@feature none
@profiles bash zsh lush

@input
for x in 1 2 3 4 5; do
    if [[ $x -eq 3 ]]; then continue; fi
    echo $x
done
@end

@expect bash:parse ok
@expect zsh:parse ok
@expect lush:parse ok
