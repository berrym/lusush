# Globbing and pathname expansion compatibility
# Wildcards and pattern matching

[glob_basic]
category = "syntax"
feature = "globbing"
description = "Basic glob patterns (*, ?, [...])"

[glob_basic.behavior]
posix = "POSIX defined - *, ?, [...] patterns"
bash = "Same as POSIX"
zsh = "Same as POSIX with many extensions"
lush = "POSIX compliant with extensions"

[glob_basic.lint]
severity = "info"
message = "Basic globbing is portable"
suggestion = "POSIX compliant"
pattern = "[*?]|\\[[^]]+\\]"

[glob_extglob]
category = "syntax"
feature = "extglob"
description = "Extended globbing ?(pat), *(pat), +(pat), @(pat), !(pat)"

[glob_extglob.behavior]
posix = "Not in POSIX"
bash = "Requires shopt -s extglob"
zsh = "Uses different syntax or setopt KSH_GLOB"
lush = "Bash-compatible extglob"

[glob_extglob.lint]
severity = "warning"
message = "Extended globbing is not portable"
suggestion = "Requires bash extglob or zsh KSH_GLOB option"
pattern = "[?*+@!]\\([^)]+\\)"

[glob_extglob.fix]
# No simple portable equivalent; requires case or find
posix = "manual"
bash = "none"
zsh = "manual"
lush = "none"

[glob_globstar]
category = "syntax"
feature = "globstar"
description = "Recursive globbing **"

[glob_globstar.behavior]
posix = "Not in POSIX"
bash = "Requires shopt -s globstar (bash 4.0+)"
zsh = "Enabled by default"
lush = "Enabled by default"

[glob_globstar.lint]
severity = "warning"
message = "Recursive glob ** is not portable"
suggestion = "Requires bash 4.0+ with globstar or zsh; use find for portability"
pattern = "\\*\\*"

[glob_globstar.fix]
# ** -> find . -type f requires restructuring
posix = "manual"
bash = "none"
zsh = "none"
lush = "none"

[glob_nullglob]
category = "syntax"
feature = "nullglob"
description = "Nullglob - no matches returns empty"

[glob_nullglob.behavior]
posix = "Not in POSIX - unmatched pattern remains literal"
bash = "shopt -s nullglob"
zsh = "setopt NULL_GLOB"
lush = "Supports nullglob option"

[glob_nullglob.lint]
severity = "info"
message = "nullglob behavior"
suggestion = "POSIX: unmatched globs are literal; enable nullglob for empty result"
pattern = "shopt\\s+-s\\s+nullglob|setopt.*NULL_GLOB"

[glob_failglob]
category = "syntax"
feature = "failglob"
description = "Failglob - error on no matches"

[glob_failglob.behavior]
posix = "Not in POSIX"
bash = "shopt -s failglob"
zsh = "setopt NOMATCH (default)"
lush = "Supports failglob option"

[glob_failglob.lint]
severity = "warning"
message = "failglob is not portable"
suggestion = "bash-specific; zsh has NOMATCH by default"
pattern = "shopt\\s+-s\\s+failglob"

[glob_failglob.fix]
# shopt -s failglob -> setopt NOMATCH in zsh
posix = "manual"
bash = "none"
zsh = "manual"
lush = "none"

[glob_dotglob]
category = "syntax"
feature = "dotglob"
description = "Dotglob - match dotfiles"

[glob_dotglob.behavior]
posix = "Not in POSIX - * does not match leading dot"
bash = "shopt -s dotglob"
zsh = "setopt GLOB_DOTS"
lush = "Supports dotglob option"

[glob_dotglob.lint]
severity = "warning"
message = "dotglob is not portable"
suggestion = "By default * doesn't match dotfiles; use explicit .* pattern"
pattern = "shopt\\s+-s\\s+dotglob|setopt.*GLOB_DOTS"

[glob_dotglob.fix]
# shopt -s dotglob -> setopt GLOB_DOTS in zsh
posix = "manual"
bash = "none"
zsh = "manual"
lush = "none"

[glob_nocaseglob]
category = "syntax"
feature = "nocaseglob"
description = "Case-insensitive globbing"

[glob_nocaseglob.behavior]
posix = "Not in POSIX"
bash = "shopt -s nocaseglob"
zsh = "setopt NO_CASE_GLOB"
lush = "Supports nocaseglob option"

[glob_nocaseglob.lint]
severity = "warning"
message = "Case-insensitive glob is not portable"
suggestion = "Not in POSIX; must use explicit patterns like [Ff]ile"
pattern = "shopt\\s+-s\\s+nocaseglob|setopt.*NO_CASE_GLOB"

[glob_nocaseglob.fix]
# No portable equivalent; must use explicit [Ff] patterns
posix = "manual"
bash = "none"
zsh = "manual"
lush = "none"

[glob_brace_range]
category = "syntax"
feature = "glob_ranges"
description = "Character ranges in brackets [a-z]"

[glob_brace_range.behavior]
posix = "POSIX defined but locale-dependent"
bash = "Same, but may vary with LC_COLLATE"
zsh = "Same as bash"
lush = "POSIX compliant"

[glob_brace_range.lint]
severity = "info"
message = "Character ranges are portable but locale-dependent"
suggestion = "Use [:alpha:] classes for locale-independent matching"
pattern = "\\[[a-z]-[a-z]\\]|\\[[A-Z]-[A-Z]\\]|\\[[0-9]-[0-9]\\]"

[glob_posix_class]
category = "syntax"
feature = "glob_posix_class"
description = "POSIX character classes [[:alpha:]]"

[glob_posix_class.behavior]
posix = "POSIX defined - [:alnum:], [:alpha:], [:digit:], etc."
bash = "Same as POSIX"
zsh = "Same as POSIX"
lush = "POSIX compliant"

[glob_posix_class.lint]
severity = "info"
message = "POSIX character classes are portable"
suggestion = "POSIX compliant; preferred over ranges for clarity"
pattern = "\\[\\[:[a-z]+:\\]\\]"

[glob_negation]
category = "syntax"
feature = "glob_negation"
description = "Negation in brackets [!...] vs [^...]"

[glob_negation.behavior]
posix = "POSIX uses [!...] for negation"
bash = "Accepts both [!...] and [^...]"
zsh = "Accepts both"
lush = "Accepts both"

[glob_negation.lint]
severity = "info"
message = "Bracket negation syntax"
suggestion = "[!...] is POSIX; [^...] is widely supported but not POSIX"
pattern = "\\[\\^[^]]+\\]"
