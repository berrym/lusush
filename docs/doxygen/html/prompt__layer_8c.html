<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lusush Shell: src/display/prompt_layer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lusush Shell<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A modern POSIX shell with GNU Readline integration</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('prompt__layer_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">prompt_layer.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Prompt Layer - Universal Prompt Rendering System.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="prompt__layer_8h_source.html">prompt_layer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lle__shell__integration_8h_source.html">lle/lle_shell_integration.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="composer_8h_source.html">lle/prompt/composer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="theme_8h_source.html">lle/prompt/theme.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="symtable_8h_source.html">symtable.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
</div>
<p><a href="prompt__layer_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a241a8e98535d06b95ffe8cfc7acd7bd7" id="r_a241a8e98535d06b95ffe8cfc7acd7bd7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a241a8e98535d06b95ffe8cfc7acd7bd7">PROMPT_LAYER_MAGIC_HEADER</a>&#160;&#160;&#160;0x50524F4D</td></tr>
<tr class="memitem:a1af109c70372004aad26bf732c999e72" id="r_a1af109c70372004aad26bf732c999e72"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1af109c70372004aad26bf732c999e72">PROMPT_LAYER_MAGIC_FOOTER</a>&#160;&#160;&#160;0x505447</td></tr>
<tr class="memitem:af7f5e191403f1c229be49095d62893f9" id="r_af7f5e191403f1c229be49095d62893f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7f5e191403f1c229be49095d62893f9">HASH_INITIAL_VALUE</a>&#160;&#160;&#160;0x811C9DC5</td></tr>
<tr class="memitem:a3340643b9fb0a58333f04e75ff897e03" id="r_a3340643b9fb0a58333f04e75ff897e03"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3340643b9fb0a58333f04e75ff897e03">HASH_PRIME</a>&#160;&#160;&#160;0x01000193</td></tr>
<tr class="memitem:a0501e82515b2bdf36453c4cc80f5e0cc" id="r_a0501e82515b2bdf36453c4cc80f5e0cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0501e82515b2bdf36453c4cc80f5e0cc">NSEC_PER_SEC</a>&#160;&#160;&#160;1000000000L</td></tr>
<tr class="memitem:a237013b60bec4db776ec854ca893fb64" id="r_a237013b60bec4db776ec854ca893fb64"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a237013b60bec4db776ec854ca893fb64">MSEC_TO_NSEC</a>&#160;&#160;&#160;1000000L</td></tr>
<tr class="memitem:acb295b17f9acbcfe87be77bbfa5c2f1b" id="r_acb295b17f9acbcfe87be77bbfa5c2f1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb295b17f9acbcfe87be77bbfa5c2f1b">THEME_CHECK_INTERVAL_MS</a>&#160;&#160;&#160;50</td></tr>
<tr class="memitem:ab658a99220ae83c1e883e86a6e42ae54" id="r_ab658a99220ae83c1e883e86a6e42ae54"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab658a99220ae83c1e883e86a6e42ae54">CONTENT_REFRESH_INTERVAL_MS</a>&#160;&#160;&#160;100</td></tr>
<tr class="memitem:aed581de90eb37c5e3a311b1936e7f0d6" id="r_aed581de90eb37c5e3a311b1936e7f0d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed581de90eb37c5e3a311b1936e7f0d6">DEBUG_PRINT</a>(fmt, ...)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae0a3beefc476079a3b45b3e69b8a0257" id="r_ae0a3beefc476079a3b45b3e69b8a0257"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0a3beefc476079a3b45b3e69b8a0257">get_active_theme_name</a> (void)</td></tr>
<tr class="memitem:a0fc54cce1bd4b7f560ef7c80871e652b" id="r_a0fc54cce1bd4b7f560ef7c80871e652b"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0fc54cce1bd4b7f560ef7c80871e652b">is_theme_available</a> (void)</td></tr>
<tr class="memitem:ace1ae885a25493cfb27791d605ea5d35" id="r_ace1ae885a25493cfb27791d605ea5d35"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ace1ae885a25493cfb27791d605ea5d35">calculate_content_hash</a> (const char *content)</td></tr>
<tr class="memitem:ab5736fc7c60233cbf64112f7df78ef85" id="r_ab5736fc7c60233cbf64112f7df78ef85"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5736fc7c60233cbf64112f7df78ef85">get_current_time_ns</a> (void)</td></tr>
<tr class="memitem:a4d2f4d0c6a08ff46a16a3251380574fc" id="r_a4d2f4d0c6a08ff46a16a3251380574fc"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d2f4d0c6a08ff46a16a3251380574fc">time_diff_ns</a> (uint64_t start_ns, uint64_t end_ns)</td></tr>
<tr class="memitem:aafeb66100ed999345ba1ece9ab2517ef" id="r_aafeb66100ed999345ba1ece9ab2517ef"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aafeb66100ed999345ba1ece9ab2517ef">validate_layer_memory</a> (const <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:a02640ed96e17b34524e6a51369ac00ec" id="r_a02640ed96e17b34524e6a51369ac00ec"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a02640ed96e17b34524e6a51369ac00ec">calculate_prompt_metrics</a> (const char *content, <a class="el" href="structprompt__metrics__t.html">prompt_metrics_t</a> *metrics)</td></tr>
<tr class="memitem:ab942b950b4cbac3206ae41c2de68183c" id="r_ab942b950b4cbac3206ae41c2de68183c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structprompt__cache__entry__t.html">prompt_cache_entry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab942b950b4cbac3206ae41c2de68183c">find_cache_entry</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer, const char *content, const char *theme_name)</td></tr>
<tr class="memitem:a84d63bccc038142e283a955065f0ae6e" id="r_a84d63bccc038142e283a955065f0ae6e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structprompt__cache__entry__t.html">prompt_cache_entry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84d63bccc038142e283a955065f0ae6e">create_cache_entry</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer, const char *content, const char *rendered_content, const char *theme_name, const <a class="el" href="structprompt__metrics__t.html">prompt_metrics_t</a> *metrics)</td></tr>
<tr class="memitem:aacb5416546187d684096403c9e0005d0" id="r_aacb5416546187d684096403c9e0005d0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aacb5416546187d684096403c9e0005d0">clear_cache</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:a7b39fc10915f0da84e267f67743f719b" id="r_a7b39fc10915f0da84e267f67743f719b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7b39fc10915f0da84e267f67743f719b">update_performance_stats</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer, uint64_t render_time_ns, bool cache_hit)</td></tr>
<tr class="memitem:a092b089f9ceb92213ea3966386dd000c" id="r_a092b089f9ceb92213ea3966386dd000c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="layer__events_8h.html#a14ae558ecdddcb2c38b538eaa39a17c5">layer_events_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a092b089f9ceb92213ea3966386dd000c">handle_theme_change_event</a> (const <a class="el" href="structlayer__event__t.html">layer_event_t</a> *event, void *user_data)</td></tr>
<tr class="memitem:a686d26fb4392ddb77bdde04837fab2b5" id="r_a686d26fb4392ddb77bdde04837fab2b5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="layer__events_8h.html#a14ae558ecdddcb2c38b538eaa39a17c5">layer_events_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a686d26fb4392ddb77bdde04837fab2b5">handle_content_refresh_event</a> (const <a class="el" href="structlayer__event__t.html">layer_event_t</a> *event, void *user_data)</td></tr>
<tr class="memitem:a8ce603f391cae3e4ea7761e11603a483" id="r_a8ce603f391cae3e4ea7761e11603a483"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ce603f391cae3e4ea7761e11603a483">render_prompt_content</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:a97cfd4a5c33f2f3bf1823aaec53cd7c8" id="r_a97cfd4a5c33f2f3bf1823aaec53cd7c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97cfd4a5c33f2f3bf1823aaec53cd7c8">prompt_layer_create</a> (void)</td></tr>
<tr class="memitem:a36407626232d9245e169cba19c7362a7" id="r_a36407626232d9245e169cba19c7362a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36407626232d9245e169cba19c7362a7">prompt_layer_init</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer, <a class="el" href="layer__events_8h.html#a7640b21b9a688099c6eea25d0d5b4c09">layer_event_system_t</a> *events)</td></tr>
<tr class="memitem:aee73f365870133a38588e83ea8a93e8d" id="r_aee73f365870133a38588e83ea8a93e8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee73f365870133a38588e83ea8a93e8d">prompt_layer_cleanup</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:af15740bdcc3af08f307ad197818511f0" id="r_af15740bdcc3af08f307ad197818511f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af15740bdcc3af08f307ad197818511f0">prompt_layer_destroy</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:a9dd5171222c57c58c1809e20ae1aae2a" id="r_a9dd5171222c57c58c1809e20ae1aae2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9dd5171222c57c58c1809e20ae1aae2a">prompt_layer_set_content</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer, const char *content)</td></tr>
<tr class="memitem:a5aab6e3ea2b2727d3e02b77d31131e42" id="r_a5aab6e3ea2b2727d3e02b77d31131e42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5aab6e3ea2b2727d3e02b77d31131e42">prompt_layer_get_rendered_content</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer, char *output, size_t output_size)</td></tr>
<tr class="memitem:a4069e243dfd364d81fd6637f1a8616d4" id="r_a4069e243dfd364d81fd6637f1a8616d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4069e243dfd364d81fd6637f1a8616d4">prompt_layer_get_metrics</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer, <a class="el" href="structprompt__metrics__t.html">prompt_metrics_t</a> *metrics)</td></tr>
<tr class="memitem:a12ea08c3c699732d1aa10da3b3a7445f" id="r_a12ea08c3c699732d1aa10da3b3a7445f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12ea08c3c699732d1aa10da3b3a7445f">prompt_layer_update_theme</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:ac28419259e56edc3b56c65dd2b690cea" id="r_ac28419259e56edc3b56c65dd2b690cea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac28419259e56edc3b56c65dd2b690cea">prompt_layer_force_render</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:af3890ff07e185e13aab0cd3e02325bcb" id="r_af3890ff07e185e13aab0cd3e02325bcb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af3890ff07e185e13aab0cd3e02325bcb">prompt_layer_get_performance</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer, <a class="el" href="structprompt__performance__t.html">prompt_performance_t</a> *performance)</td></tr>
<tr class="memitem:aef212b132211a8f22b55fb8f29400449" id="r_aef212b132211a8f22b55fb8f29400449"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef212b132211a8f22b55fb8f29400449">prompt_layer_reset_performance</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:a96d37b8ee9329a0c61c6b96b3f52bc74" id="r_a96d37b8ee9329a0c61c6b96b3f52bc74"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96d37b8ee9329a0c61c6b96b3f52bc74">prompt_layer_optimize</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:aeaa9d7d52357cb1c417e9f23f371d5d7" id="r_aeaa9d7d52357cb1c417e9f23f371d5d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeaa9d7d52357cb1c417e9f23f371d5d7">prompt_layer_process_events</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:ada26d37aab4e054ab758448ce474c13f" id="r_ada26d37aab4e054ab758448ce474c13f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada26d37aab4e054ab758448ce474c13f">prompt_layer_validate</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:a17bf2d090de7b77d8af2ffec63cdcf87" id="r_a17bf2d090de7b77d8af2ffec63cdcf87"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17bf2d090de7b77d8af2ffec63cdcf87">prompt_layer_error_string</a> (<a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> error)</td></tr>
<tr class="memitem:ac410f955416ae504578aeca352bd4bd7" id="r_ac410f955416ae504578aeca352bd4bd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac410f955416ae504578aeca352bd4bd7">prompt_layer_get_version</a> (int *major, int *minor, int *patch)</td></tr>
<tr class="memitem:a7cb244efb2409670a5c0f6177f86cc07" id="r_a7cb244efb2409670a5c0f6177f86cc07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7cb244efb2409670a5c0f6177f86cc07">prompt_layer_generate_from_lusush</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
<tr class="memitem:aac0cbf7290dd52d6cf9d786866b835ea" id="r_aac0cbf7290dd52d6cf9d786866b835ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac0cbf7290dd52d6cf9d786866b835ea">prompt_layer_run_tests</a> (<a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *layer)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Prompt Layer - Universal Prompt Rendering System. </p>
<p>Part of the Lusush Shell Layered Display Architecture. Handles prompt generation, caching, and theme integration.</p>
<dl class="section author"><dt>Author</dt><dd>Michael Berry <a href="#" onclick="location.href='mai'+'lto:'+'tri'+'sm'+'egu'+'st'+'is@'+'gm'+'ail'+'.c'+'om'; return false;">trism<span class="obfuscator">.nosp@m.</span>egus<span class="obfuscator">.nosp@m.</span>tis@g<span class="obfuscator">.nosp@m.</span>mail<span class="obfuscator">.nosp@m.</span>.com</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2021-2026 Michael Berry</dd></dl>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>.</p>
<hr  />
<p>PROMPT LAYER IMPLEMENTATION</p>
<p>This file implements the prompt layer for the Lusush Display System. The prompt layer provides universal prompt rendering that works with ANY prompt structure without requiring parsing or modification.</p>
<p>Key Features:</p><ul>
<li>Universal prompt structure compatibility</li>
<li>Integration with existing theme system (6 professional themes)</li>
<li>Event-driven communication with foundation layers</li>
<li>High-performance rendering with intelligent caching</li>
<li>Memory-safe prompt content management</li>
<li>Real-time theme switching support</li>
</ul>
<p>Architecture Integration:</p><ul>
<li>Uses Layer 2 (Terminal Control) for ANSI sequences</li>
<li>Uses Layer 1 (Base Terminal) for terminal capabilities</li>
<li>Uses Layer 0 (Event Communication) for layer coordination</li>
<li>Integrates with existing theme system (src/themes.c)</li>
<li>Integrates with existing prompt generation (src/prompt.c) </li>
</ul>

<p class="definition">Definition in file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>
</div><a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="ab658a99220ae83c1e883e86a6e42ae54" name="ab658a99220ae83c1e883e86a6e42ae54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab658a99220ae83c1e883e86a6e42ae54">&#9670;&#160;</a></span>CONTENT_REFRESH_INTERVAL_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONTENT_REFRESH_INTERVAL_MS&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00079">79</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="aed581de90eb37c5e3a311b1936e7f0d6" name="aed581de90eb37c5e3a311b1936e7f0d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed581de90eb37c5e3a311b1936e7f0d6">&#9670;&#160;</a></span>DEBUG_PRINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_PRINT</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fmt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em></em></span>...&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((void)0)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00086">86</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="af7f5e191403f1c229be49095d62893f9" name="af7f5e191403f1c229be49095d62893f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7f5e191403f1c229be49095d62893f9">&#9670;&#160;</a></span>HASH_INITIAL_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_INITIAL_VALUE&#160;&#160;&#160;0x811C9DC5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00070">70</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a3340643b9fb0a58333f04e75ff897e03" name="a3340643b9fb0a58333f04e75ff897e03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3340643b9fb0a58333f04e75ff897e03">&#9670;&#160;</a></span>HASH_PRIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASH_PRIME&#160;&#160;&#160;0x01000193</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00071">71</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a237013b60bec4db776ec854ca893fb64" name="a237013b60bec4db776ec854ca893fb64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a237013b60bec4db776ec854ca893fb64">&#9670;&#160;</a></span>MSEC_TO_NSEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSEC_TO_NSEC&#160;&#160;&#160;1000000L</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00075">75</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a0501e82515b2bdf36453c4cc80f5e0cc" name="a0501e82515b2bdf36453c4cc80f5e0cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0501e82515b2bdf36453c4cc80f5e0cc">&#9670;&#160;</a></span>NSEC_PER_SEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NSEC_PER_SEC&#160;&#160;&#160;1000000000L</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00074">74</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a1af109c70372004aad26bf732c999e72" name="a1af109c70372004aad26bf732c999e72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1af109c70372004aad26bf732c999e72">&#9670;&#160;</a></span>PROMPT_LAYER_MAGIC_FOOTER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PROMPT_LAYER_MAGIC_FOOTER&#160;&#160;&#160;0x505447</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00067">67</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a241a8e98535d06b95ffe8cfc7acd7bd7" name="a241a8e98535d06b95ffe8cfc7acd7bd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a241a8e98535d06b95ffe8cfc7acd7bd7">&#9670;&#160;</a></span>PROMPT_LAYER_MAGIC_HEADER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PROMPT_LAYER_MAGIC_HEADER&#160;&#160;&#160;0x50524F4D</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00066">66</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="acb295b17f9acbcfe87be77bbfa5c2f1b" name="acb295b17f9acbcfe87be77bbfa5c2f1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb295b17f9acbcfe87be77bbfa5c2f1b">&#9670;&#160;</a></span>THEME_CHECK_INTERVAL_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THEME_CHECK_INTERVAL_MS&#160;&#160;&#160;50</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00078">78</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ace1ae885a25493cfb27791d605ea5d35" name="ace1ae885a25493cfb27791d605ea5d35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace1ae885a25493cfb27791d605ea5d35">&#9670;&#160;</a></span>calculate_content_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t calculate_content_hash </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>content</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculate FNV-1a hash for content validation </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00121">121</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a02640ed96e17b34524e6a51369ac00ec" name="a02640ed96e17b34524e6a51369ac00ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02640ed96e17b34524e6a51369ac00ec">&#9670;&#160;</a></span>calculate_prompt_metrics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void calculate_prompt_metrics </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>content</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structprompt__metrics__t.html">prompt_metrics_t</a> *</td>          <td class="paramname"><span class="paramname"><em>metrics</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculate prompt metrics from content </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00165">165</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="aacb5416546187d684096403c9e0005d0" name="aacb5416546187d684096403c9e0005d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacb5416546187d684096403c9e0005d0">&#9670;&#160;</a></span>clear_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void clear_cache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Clear all cache entries </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00337">337</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a84d63bccc038142e283a955065f0ae6e" name="a84d63bccc038142e283a955065f0ae6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84d63bccc038142e283a955065f0ae6e">&#9670;&#160;</a></span>create_cache_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprompt__cache__entry__t.html">prompt_cache_entry_t</a> * create_cache_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>content</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>rendered_content</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>theme_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structprompt__metrics__t.html">prompt_metrics_t</a> *</td>          <td class="paramname"><span class="paramname"><em>metrics</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create new cache entry </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00290">290</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="ab942b950b4cbac3206ae41c2de68183c" name="ab942b950b4cbac3206ae41c2de68183c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab942b950b4cbac3206ae41c2de68183c">&#9670;&#160;</a></span>find_cache_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprompt__cache__entry__t.html">prompt_cache_entry_t</a> * find_cache_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>content</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>theme_name</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find cached entry for content and theme </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00255">255</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="ae0a3beefc476079a3b45b3e69b8a0257" name="ae0a3beefc476079a3b45b3e69b8a0257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0a3beefc476079a3b45b3e69b8a0257">&#9670;&#160;</a></span>get_active_theme_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * get_active_theme_name </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get active theme name from LLE theme registry </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00096">96</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="ab5736fc7c60233cbf64112f7df78ef85" name="ab5736fc7c60233cbf64112f7df78ef85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5736fc7c60233cbf64112f7df78ef85">&#9670;&#160;</a></span>get_current_time_ns()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_current_time_ns </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get current timestamp with nanosecond precision </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00139">139</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a686d26fb4392ddb77bdde04837fab2b5" name="a686d26fb4392ddb77bdde04837fab2b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a686d26fb4392ddb77bdde04837fab2b5">&#9670;&#160;</a></span>handle_content_refresh_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="layer__events_8h.html#a14ae558ecdddcb2c38b538eaa39a17c5">layer_events_error_t</a> handle_content_refresh_event </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlayer__event__t.html">layer_event_t</a> *</td>          <td class="paramname"><span class="paramname"><em>event</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>user_data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Event callback handler for content refresh requests </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00426">426</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a092b089f9ceb92213ea3966386dd000c" name="a092b089f9ceb92213ea3966386dd000c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a092b089f9ceb92213ea3966386dd000c">&#9670;&#160;</a></span>handle_theme_change_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="layer__events_8h.html#a14ae558ecdddcb2c38b538eaa39a17c5">layer_events_error_t</a> handle_theme_change_event </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlayer__event__t.html">layer_event_t</a> *</td>          <td class="paramname"><span class="paramname"><em>event</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>user_data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Event callback handler for theme changes </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00403">403</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a0fc54cce1bd4b7f560ef7c80871e652b" name="a0fc54cce1bd4b7f560ef7c80871e652b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fc54cce1bd4b7f560ef7c80871e652b">&#9670;&#160;</a></span>is_theme_available()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool is_theme_available </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check if a theme is available from LLE </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00111">111</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="aee73f365870133a38588e83ea8a93e8d" name="aee73f365870133a38588e83ea8a93e8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee73f365870133a38588e83ea8a93e8d">&#9670;&#160;</a></span>prompt_layer_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_cleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cleanup prompt layer resources</p>
<p>Releases all resources used by the prompt layer, including:</p><ul>
<li>Event system subscriptions and communication</li>
<li>Theme system integration cleanup</li>
<li>Cache memory and content cleanup</li>
<li>Performance monitoring cleanup</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Safe to call multiple times </dd>
<dd>
Does not free the layer structure itself - use <a class="el" href="prompt__layer_8h.html#af15740bdcc3af08f307ad197818511f0">prompt_layer_destroy()</a> </dd>
<dd>
Automatically disables the layer during cleanup </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00615">615</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a97cfd4a5c33f2f3bf1823aaec53cd7c8" name="a97cfd4a5c33f2f3bf1823aaec53cd7c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97cfd4a5c33f2f3bf1823aaec53cd7c8">&#9670;&#160;</a></span>prompt_layer_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> * prompt_layer_create </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new prompt layer instance</p>
<p>Allocates and initializes a new <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> structure with default values. The layer is not yet ready for use - call <a class="el" href="prompt__layer_8h.html#a36407626232d9245e169cba19c7362a7">prompt_layer_init()</a> to complete initialization.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to new <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance, or NULL on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The returned pointer must be freed with <a class="el" href="prompt__layer_8h.html#af15740bdcc3af08f307ad197818511f0">prompt_layer_destroy()</a> </dd>
<dd>
Layer starts in disabled state until properly initialized </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00522">522</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="af15740bdcc3af08f307ad197818511f0" name="af15740bdcc3af08f307ad197818511f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af15740bdcc3af08f307ad197818511f0">&#9670;&#160;</a></span>prompt_layer_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prompt_layer_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy prompt layer instance</p>
<p>Performs cleanup and frees the layer structure. After calling this function, the layer pointer is invalid and should not be used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Automatically calls <a class="el" href="prompt__layer_8h.html#aee73f365870133a38588e83ea8a93e8d">prompt_layer_cleanup()</a> if needed </dd>
<dd>
Safe to call with NULL pointer </dd>
<dd>
Validates memory integrity before destruction </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00664">664</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a17bf2d090de7b77d8af2ffec63cdcf87" name="a17bf2d090de7b77d8af2ffec63cdcf87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17bf2d090de7b77d8af2ffec63cdcf87">&#9670;&#160;</a></span>prompt_layer_error_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * prompt_layer_error_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a></td>          <td class="paramname"><span class="paramname"><em>error</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get human-readable error description</p>
<p>Returns a descriptive string for the given error code, useful for logging and debugging purposes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">error</td><td>Error code to describe </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String description of the error</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Returned string is statically allocated and does not need to be freed </dd>
<dd>
Safe to call with any error code value </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l01022">1022</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="ac28419259e56edc3b56c65dd2b690cea" name="ac28419259e56edc3b56c65dd2b690cea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac28419259e56edc3b56c65dd2b690cea">&#9670;&#160;</a></span>prompt_layer_force_render()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_force_render </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Force re-rendering with current theme</p>
<p>Forces immediate re-rendering of prompt content with the current theme, bypassing cache and performance optimizations. Useful for theme debugging or when cache corruption is suspected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Clears all cache entries before rendering </dd>
<dd>
Updates performance metrics with forced render timing </dd>
<dd>
Should be used sparingly due to performance impact </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00866">866</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a7cb244efb2409670a5c0f6177f86cc07" name="a7cb244efb2409670a5c0f6177f86cc07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cb244efb2409670a5c0f6177f86cc07">&#9670;&#160;</a></span>prompt_layer_generate_from_lusush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_generate_from_lusush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate prompt using existing Lusush prompt system</p>
<p>Convenience function that integrates with the existing Lusush prompt generation system (src/prompt.c) to create content for the layer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Uses existing build_prompt() and theme_generate_primary_prompt() functions </dd>
<dd>
Automatically sets generated content in the layer </dd>
<dd>
Preserves all existing prompt generation functionality </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l01065">1065</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a4069e243dfd364d81fd6637f1a8616d4" name="a4069e243dfd364d81fd6637f1a8616d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4069e243dfd364d81fd6637f1a8616d4">&#9670;&#160;</a></span>prompt_layer_get_metrics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_get_metrics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structprompt__metrics__t.html">prompt_metrics_t</a> *</td>          <td class="paramname"><span class="paramname"><em>metrics</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get prompt metrics and positioning information</p>
<p>Returns detailed metrics about the current prompt, including size, line count, and estimated cursor positioning for command input.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
    <tr><td class="paramname">metrics</td><td>Pointer to structure to receive metrics </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Metrics are calculated automatically during rendering </dd>
<dd>
Provides best-effort cursor position estimation </dd>
<dd>
Updates performance statistics during calculation </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00772">772</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="af3890ff07e185e13aab0cd3e02325bcb" name="af3890ff07e185e13aab0cd3e02325bcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3890ff07e185e13aab0cd3e02325bcb">&#9670;&#160;</a></span>prompt_layer_get_performance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_get_performance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structprompt__performance__t.html">prompt_performance_t</a> *</td>          <td class="paramname"><span class="paramname"><em>performance</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get current performance statistics</p>
<p>Returns detailed performance metrics for the prompt layer, including render times, cache hit rates, and resource usage statistics.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
    <tr><td class="paramname">performance</td><td>Pointer to structure to receive performance data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Performance data is updated continuously during operation </dd>
<dd>
Includes historical timing data for trend analysis </dd>
<dd>
Useful for performance optimization and debugging </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00890">890</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a5aab6e3ea2b2727d3e02b77d31131e42" name="a5aab6e3ea2b2727d3e02b77d31131e42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aab6e3ea2b2727d3e02b77d31131e42">&#9670;&#160;</a></span>prompt_layer_get_rendered_content()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_get_rendered_content </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>output</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>output_size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get current rendered prompt content</p>
<p>Returns the current rendered prompt content with theme colors and formatting applied. The content is ready for direct terminal output.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
    <tr><td class="paramname">output</td><td>Buffer to store rendered content </td></tr>
    <tr><td class="paramname">output_size</td><td>Size of output buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Automatically renders content if cache is invalid </dd>
<dd>
Output includes ANSI color codes and formatting </dd>
<dd>
Buffer must be large enough for rendered content </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00734">734</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="ac410f955416ae504578aeca352bd4bd7" name="ac410f955416ae504578aeca352bd4bd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac410f955416ae504578aeca352bd4bd7">&#9670;&#160;</a></span>prompt_layer_get_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prompt_layer_get_version </td>
          <td>(</td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>major</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>minor</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>patch</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get layer version information</p>
<p>Returns version information for the prompt layer implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">major</td><td>Pointer to receive major version number </td></tr>
    <tr><td class="paramname">minor</td><td>Pointer to receive minor version number </td></tr>
    <tr><td class="paramname">patch</td><td>Pointer to receive patch version number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>All parameters are optional (can be NULL) </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l01052">1052</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a36407626232d9245e169cba19c7362a7" name="a36407626232d9245e169cba19c7362a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36407626232d9245e169cba19c7362a7">&#9670;&#160;</a></span>prompt_layer_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="layer__events_8h.html#a7640b21b9a688099c6eea25d0d5b4c09">layer_event_system_t</a> *</td>          <td class="paramname"><span class="paramname"><em>events</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize prompt layer with event system integration</p>
<p>Completes initialization of the prompt layer, including:</p><ul>
<li>Event system integration and subscription setup</li>
<li>Theme system integration and validation</li>
<li>Performance monitoring initialization</li>
<li>Cache system preparation</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
    <tr><td class="paramname">events</td><td>Pointer to layer events system </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Layer must be created before calling this function </dd>
<dd>
Events system must be initialized before calling this function </dd>
<dd>
Automatically enables the layer on successful initialization </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00552">552</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a96d37b8ee9329a0c61c6b96b3f52bc74" name="a96d37b8ee9329a0c61c6b96b3f52bc74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96d37b8ee9329a0c61c6b96b3f52bc74">&#9670;&#160;</a></span>prompt_layer_optimize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_optimize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Optimize layer performance and cleanup resources</p>
<p>Performs maintenance operations to optimize layer performance:</p><ul>
<li>Cache cleanup and reorganization</li>
<li>Memory defragmentation</li>
<li>Performance statistics analysis</li>
<li>Resource usage optimization</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Safe to call during normal operation </dd>
<dd>
May cause temporary performance impact during optimization </dd>
<dd>
Automatically called periodically by the layer </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00919">919</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="aeaa9d7d52357cb1c417e9f23f371d5d7" name="aeaa9d7d52357cb1c417e9f23f371d5d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaa9d7d52357cb1c417e9f23f371d5d7">&#9670;&#160;</a></span>prompt_layer_process_events()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_process_events </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process pending events for the layer</p>
<p>Processes all pending events relevant to the prompt layer, including:</p><ul>
<li>Theme change notifications</li>
<li>Terminal size change events</li>
<li>Content refresh requests</li>
<li>Performance monitoring events</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Should be called regularly to maintain responsiveness </dd>
<dd>
Automatically handles event prioritization </dd>
<dd>
Updates layer state based on processed events </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00968">968</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="aef212b132211a8f22b55fb8f29400449" name="aef212b132211a8f22b55fb8f29400449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef212b132211a8f22b55fb8f29400449">&#9670;&#160;</a></span>prompt_layer_reset_performance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_reset_performance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset performance statistics</p>
<p>Resets all performance counters and timing statistics to initial values. Useful for performance testing and benchmarking specific operations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Preserves cache contents but resets cache hit/miss counters </dd>
<dd>
Does not affect layer functionality or content </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00904">904</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="aac0cbf7290dd52d6cf9d786866b835ea" name="aac0cbf7290dd52d6cf9d786866b835ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac0cbf7290dd52d6cf9d786866b835ea">&#9670;&#160;</a></span>prompt_layer_run_tests()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_run_tests </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test prompt layer with sample content</p>
<p>Testing helper that validates layer functionality with various prompt formats and theme configurations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS if all tests pass, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Tests simple, complex, and multiline prompt formats </dd>
<dd>
Validates performance requirements </dd>
<dd>
Useful for integration testing and validation </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l01099">1099</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a9dd5171222c57c58c1809e20ae1aae2a" name="a9dd5171222c57c58c1809e20ae1aae2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dd5171222c57c58c1809e20ae1aae2a">&#9670;&#160;</a></span>prompt_layer_set_content()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_set_content </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>content</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set prompt content for rendering</p>
<p>Sets the raw prompt content that will be rendered with the current theme. The content can be any format - simple text, complex multi-line prompts, or even ASCII art. No parsing or structural analysis is performed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
    <tr><td class="paramname">content</td><td>Raw prompt content to render </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Content is copied internally - caller retains ownership </dd>
<dd>
Triggers cache invalidation and re-rendering </dd>
<dd>
Supports any prompt structure without modification </dd>
<dd>
Content length is limited by PROMPT_LAYER_MAX_CONTENT_SIZE </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00694">694</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a12ea08c3c699732d1aa10da3b3a7445f" name="a12ea08c3c699732d1aa10da3b3a7445f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12ea08c3c699732d1aa10da3b3a7445f">&#9670;&#160;</a></span>prompt_layer_update_theme()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_update_theme </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update theme integration and refresh content</p>
<p>Updates the layer's theme integration, validates theme availability, and triggers content re-rendering with the new theme if needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS on success, error code on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Automatically detects theme changes and updates accordingly </dd>
<dd>
Invalidates cache when theme changes are detected </dd>
<dd>
Integrates with existing Lusush theme system </dd>
<dd>
Supports all 6 built-in themes (dark, light, minimal, colorful, classic, corporate) </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00802">802</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="ada26d37aab4e054ab758448ce474c13f" name="ada26d37aab4e054ab758448ce474c13f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada26d37aab4e054ab758448ce474c13f">&#9670;&#160;</a></span>prompt_layer_validate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> prompt_layer_validate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Validate layer integrity and state</p>
<p>Performs comprehensive validation of the layer's internal state, memory integrity, and configuration consistency.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">layer</td><td>Pointer to <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PROMPT_LAYER_SUCCESS if valid, error code if issues detected</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Checks memory corruption markers </dd>
<dd>
Validates all internal pointers and structures </dd>
<dd>
Useful for debugging and health monitoring </dd></dl>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00996">996</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a8ce603f391cae3e4ea7761e11603a483" name="a8ce603f391cae3e4ea7761e11603a483"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ce603f391cae3e4ea7761e11603a483">&#9670;&#160;</a></span>render_prompt_content()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="prompt__layer_8h.html#a0159581eddb8755b9ae482a6a62068eb">prompt_layer_error_t</a> render_prompt_content </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Render prompt content with current theme </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00445">445</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a4d2f4d0c6a08ff46a16a3251380574fc" name="a4d2f4d0c6a08ff46a16a3251380574fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d2f4d0c6a08ff46a16a3251380574fc">&#9670;&#160;</a></span>time_diff_ns()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t time_diff_ns </td>
          <td>(</td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>start_ns</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>end_ns</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculate time difference in nanoseconds </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00148">148</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="a7b39fc10915f0da84e267f67743f719b" name="a7b39fc10915f0da84e267f67743f719b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b39fc10915f0da84e267f67743f719b">&#9670;&#160;</a></span>update_performance_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void update_performance_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>render_time_ns</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>cache_hit</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update performance statistics </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00363">363</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
<a id="aafeb66100ed999345ba1ece9ab2517ef" name="aafeb66100ed999345ba1ece9ab2517ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafeb66100ed999345ba1ece9ab2517ef">&#9670;&#160;</a></span>validate_layer_memory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool validate_layer_memory </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structprompt__layer__t.html">prompt_layer_t</a> *</td>          <td class="paramname"><span class="paramname"><em>layer</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Validate layer memory integrity </p>

<p class="definition">Definition at line <a class="el" href="prompt__layer_8c_source.html#l00155">155</a> of file <a class="el" href="prompt__layer_8c_source.html">prompt_layer.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="dir_25685f9c6d837c57f295dee081495707.html">display</a></li><li class="navelem"><a href="prompt__layer_8c.html">prompt_layer.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
